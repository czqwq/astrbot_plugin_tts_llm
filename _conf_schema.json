{
  "send_text_with_audio": {
    "type": "bool",
    "description": "是否在发送语音的同时附带LLM原文",
    "default": true
  },
  "default_character": {
    "type": "string",
    "description": "LLM自动回复时，默认使用的角色名",
    "default": "kisaki",
    "hint": "这个角色必须已通过 /注册情感 指令添加过"
  },
  "default_emotion_name": {
    "type": "string",
    "description": "固定感情模式下，默认使用的情感名",
    "default": "幸福",
    "hint": "这个情感必须已通过 /注册情感 指令添加过"
  },
  "translation_api": {
    "type": "object",
    "description": "翻译API配置 (旧版独立API)",
    "items": {
      "base_url": {
        "type": "string",
        "description": "API的Base URL",
        "default": "https://api.openai.com/v1"
      },
      "api_key": {
        "type": "string",
        "description": "API Key"
      },
      "model": {
        "type": "string",
        "description": "用于翻译的AI模型",
        "default": "gpt-4o-mini"
      },
      "api_format": {
        "type": "string",
        "description": "请求格式",
        "options": [
          "openai",
          "gemini"
        ],
        "default": "openai"
      },
      "prompt": {
        "type": "text",
        "description": "给翻译模型的通用系统提示词(在自动情感识别模式下会被覆盖)",
        "default": "请将用户提供的文本准确、自然地翻译成日语。请严格遵循用户的具体指令，比如情感分析和格式要求。不要添加任何解释或额外内容，只返回翻译后的日语文本。"
      },
      "w_mode_prompt": {
        "type": "text",
        "description": "自动情感识别模式(/tts-w)下的提示词模板。必须包含 {emotion_list} 和 {text} 两个占位符。",
        "default": "你需要执行一项复杂的翻译任务。首先，分析以下中文文本的情感，然后从给定的情感列表中选择一个最匹配的。最后，将文本自然地翻译成日语，并在翻译结果的末尾严格按照 '[情感名称]' 的格式附加上你选择的情感名称。\n\n可用的情感列表: [{emotion_list}]\n\n待处理的中文文本:\n\"\"\"\n{text}\n\"\"\"\n\n请严格遵守格式要求，不要添加任何额外的解释或说明，只输出带有情感标签的日文翻译结果。"
      }
    }
  },
  "llm_injection_settings": {
    "description": "LLM 注入与高级翻译设置 (v1.3.0)",
    "type": "object",
    "items": {
      "enable_llm_emotion": {
        "description": "让主LLM直接生成情感标签",
        "type": "bool",
        "default": false,
        "hint": "开启后，会自动向LLM注入提示词，要求其在回复中包含情感标签 [emotion=xxx]。"
      },
      "enable_llm_translation": {
        "description": "让主LLM直接生成日语翻译",
        "type": "bool",
        "default": false,
        "hint": "开启后，会自动向LLM注入提示词，要求其在回复中包含日语翻译 $xxx$。"
      },
      "llm_emotion_prompt": {
        "description": "情感注入提示词模板",
        "type": "text",
        "default": "请在回复中包含情感标签。\n情感标签格式：[emotion=情感名]，例如 [emotion=开心]。\n可选的情感有：{emotions}。\n请将情感标签紧随回复主体之后或位于句首。",
        "hint": "{emotions} 会被自动替换为当前角色可用的情感列表。"
      },
      "llm_translation_prompt": {
        "description": "翻译注入提示词模板",
        "type": "text",
        "default": "请在回复中包含日语翻译。\n日语翻译格式：$日语内容$，例如 $こんにちは$。\n请将翻译内容紧随回复主体之后。"
      },
      "use_astrbot_provider": {
        "description": "使用 AstrBot 框架内的模型进行翻译",
        "type": "bool",
        "default": false,
        "hint": "如果未开启“主LLM生成翻译”，且开启此项，将使用下方选择的模型进行翻译，不再使用旧版独立API。"
      },
      "astrbot_provider_id": {
        "description": "选择用于翻译的模型提供商",
        "type": "string",
        "_special": "select_provider",
        "hint": "请确保所选模型可用。"
      },
      "translation_prompt": {
        "description": "翻译专用提示词 (用于框架模型翻译)",
        "type": "text",
        "default": "你是一个专业的翻译助手。请将以下中文文本翻译成自然的日语口语。仅输出翻译后的文本，不要包含任何解释或额外内容。"
      }
    }
  },
  "tts_servers": {
    "type": "list",
    "description": "TTS 服务器地址列表。可配置多个以实现故障转移。",
    "default": [
      "https://your-name-your-space.hf.space"
    ]
  },
  "enable_space_keepalive": {
    "type": "bool",
    "description": "是否自动定期访问 Hugging Face Space 以防止休眠",
    "default": false,
    "hint": "仅在使用 Hugging Face Space 时启用，避免无效的保活请求。"
  },
  "space_keepalive_url": {
    "type": "string",
    "description": "额外的保活请求目标地址（插件会自动对所有配置的TTS服务器进行保活，此处可配置额外的地址）"
  },
  "space_keepalive_interval_minutes": {
    "type": "int",
    "description": "两次保活之间的间隔分钟数",
    "default": 25,
    "hint": "Hugging Face Space 默认24小时不访问会休眠，建议设置在15-30分钟内。"
  },
  "enable_sentence_splitting": {
    "type": "bool",
    "description": "是否启用句子切分功能以加速长文本合成",
    "default": false,
    "hint": "开启后，插件会将长回复切分成短句，并行发送给多个TTS服务器合成，最后拼接成一条语音。可以显著提高响应速度。"
  },
  "sentences_per_chunk": {
    "type": "int",
    "description": "每个语音分段包含的句子数量",
    "default": 2,
    "hint": "数字越小，并行度越高，但请求也越频繁。请根据您的TTS服务器性能调整。"
  },
  "sentence_split_regex": {
    "type": "string",
    "description": "用于切分句子的正则表达式",
    "default": "([。、，！？,.!?])",
    "hint": "插件将使用这个正则表达式来识别句子的边界。默认规则会按中英文标点切分。注意：括号 () 是必须的，它能确保标点符号被保留在切分后的句子末尾。"
  }
}